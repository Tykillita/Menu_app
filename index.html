<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Cocina de Anita</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
            background: #1a1a1a;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        /* Pantalla de presentaci√≥n */
        .welcome-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            text-align: center;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
        }

        .logo {
            width: 200px;
            height: 200px;
            margin-bottom: 30px;
            animation: pulse 2s infinite;
            transform: translateZ(0); /* Fuerza aceleraci√≥n por hardware */

        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .welcome-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: #b8b8b8;
            margin-bottom: 40px;
        }

        .btn {
            background: linear-gradient(45deg, #2a5f2a, #1e4d1e);
            color: white;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
            background: linear-gradient(45deg, #2d652d, #214d21);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #4a4a4a, #333333);
        }

        .btn-secondary:hover {
            background: linear-gradient(45deg, #555555, #404040);
        }

        .social-links {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
        }

        .social-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .instagram-btn {
            background: linear-gradient(45deg, #8b4513, #a0522d);
        }

        .whatsapp-btn {
            background: #2d5a2d;
        }

        .social-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        /* Pantalla del men√∫ */
        .menu-screen {
            display: none;
            padding: 20px;
            min-height: 100vh;
        }

        .menu-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(45deg, rgba(196,30,58,0.1), rgba(34,139,34,0.1));
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .menu-title {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .menu-subtitle {
            color: #b8b8b8;
            font-size: 1.1rem;
        }

        .step-container {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.03);
            border-radius: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.08);
        }

        .step-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #228b22;
        }

        .option-btn {
            width: 100%;
            padding: 15px;
            margin: 8px 0;
            border: 2px solid transparent;
            border-radius: 8px;
            background: rgba(255,255,255,0.08);
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .option-btn:hover {
            background: rgba(255,255,255,0.12);
            transform: translateX(5px);
            border-color: rgba(34,139,34,0.5);
        }

        .option-btn.selected {
            border-color: #228b22;
            background: rgba(34,139,34,0.2);
        }

        .step-hidden {
            display: none;
        }

        .extras-container {
            display: flex;
            gap: 15px;
        }

        .extra-option {
            flex: 1;
        }

        .toggle-btn {
            width: 100%;
            padding: 15px;
            border: 2px solid #555;
            border-radius: 8px;
            background: rgba(255,255,255,0.08);
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-btn.active {
            border-color: #228b22;
            background: rgba(34,139,34,0.2);
        }

        .order-summary {
            background: linear-gradient(45deg, rgba(196,30,58,0.08), rgba(34,139,34,0.08));
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .summary-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #c41e3a;
        }

        .summary-item {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .btn-back {
            background: linear-gradient(45deg, #666, #888);
            flex: 1;
        }

        .btn-next {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            flex: 2;
        }

        .btn-order {
            background: linear-gradient(45deg, #28a745, #20c997);
            width: 100%;
        }

        .payment-info {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .payment-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #4ecdc4;
        }

        .payment-methods {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .payment-method {
            text-align: center;
            color: #ccc;
        }

        .payment-method strong {
            display: block;
            margin-bottom: 5px;
            color: white;
        }

        .text-input {
            width: 100%;
            padding: 15px;
            margin: 8px 0;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            background: rgba(255,255,255,0.08);
            color: white;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .text-input:focus {
            outline: none;
            border-color: #228b22;
            background: rgba(255,255,255,0.12);
        }

        .text-input::placeholder {
            color: #b8b8b8;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #228b22;
            font-weight: bold;
        }

        .price-display {
            text-align: center;
            padding: 15px;
            margin: 15px 0;
            background: rgba(34,139,34,0.1);
            border-radius: 8px;
            border: 2px solid rgba(34,139,34,0.3);
        }

        .total-price {
            text-align: center;
            padding: 20px;
            background: linear-gradient(45deg, rgba(196,30,58,0.15), rgba(34,139,34,0.15));
            border-radius: 10px;
            margin: 20px 0;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .order-item {
            background: rgba(255,255,255,0.03);
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #228b22;
            border: 1px solid rgba(255,255,255,0.08);
        }

        .order-item h4 {
            color: #c41e3a;
            margin-bottom: 10px;
        }

        .privacy-note {
            background: rgba(78,205,196,0.05);
            border: 1px solid rgba(78,205,196,0.2);
            border-radius: 8px;
            padding: 10px;
            margin: 15px 0;
        }

        .form-group small {
            display: block;
            margin-top: 5px;
        }

        .hidden {
            display: none !important;
        }

        .extras-note {
            background: rgba(78,205,196,0.05);
            border: 1px solid rgba(78,205,196,0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }

        .extras-note p {
            color: #4ecdc4;
            font-size: 0.95rem;
            margin-bottom: 10px;
        }

        .navigation-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .container {
                max-width: 100%;
            }
            
            .welcome-title {
                font-size: 2rem;
            }
            
            .logo {
                width: 150px;
                height: 150px;
            }
            
            .btn {
                min-width: 180px;
                padding: 12px 25px;
            }

            .text-input {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Pantalla de Bienvenida -->
        <div id="welcomeScreen" class="welcome-screen">
            <img src="pictures\La cocina de anita logo cosido 2 (sin fondo).png" 
                 class="logo" 
                 alt="La Cocina de Anita Logo">
            
            <h1 class="welcome-title">La Cocina de Anita</h1>
            <p class="welcome-subtitle">Comida casera con amor</p>
            
            
            <button class="btn" onclick="openMenu()">üçΩÔ∏è Ver Men√∫ de la Semana</button>
            <button class="btn" onclick="openSauceMenu()">üçù Ver Men√∫ de Salsas Envasadas</button>
            <button class="btn" onclick="openDessertMenu()">üç∞ Ver Men√∫ de Postres</button>
            <button class="btn btn-secondary" onclick="closeApp()">‚ùå Cerrar</button>
            
            <div class="social-links">
                <button class="social-btn instagram-btn" onclick="openInstagram()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                    </svg>
                </button>
                <button class="social-btn whatsapp-btn" onclick="openWhatsApp()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.531 3.488"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Pantalla del Men√∫ -->
        <div id="menuScreen" class="menu-screen">
            <div class="menu-header">
                <img src="pictures\La cocina de anita logo cosido 2 (sin fondo).png" 
                     style="width: 80px; height: 80px; margin: 0 auto 15px; display: block;"
                     alt="La Cocina de Anita Logo">
                <h2 class="menu-title" style="color: white;">Arma tu Comida</h2>
                <p class="menu-subtitle">Selecciona tus opciones paso a paso</p>
            </div>

            <!-- Paso 1: Tipo de Plato -->
            <div id="step1" class="step-container">
                <h3 class="step-title">Paso 1: Elige tu Plato Principal</h3>
            <!--<button class="option-btn" onclick="selectDish('milanesa-pollo')">üêî Milanesa de Pollo</button>
                <button class="option-btn" onclick="selectDish('milanesa-carne')">ü•© Milanesa de Carne</button> -->
            <!--<button class="option-btn" onclick="selectDish('pabellon')" style="background: linear-gradient(45deg, rgba(255,193,7,0.1), rgba(220,53,69,0.1)); border: 1px solid rgba(255,193,7,0.3);">
                    üáªüá™ Pabell√≥n Criollo Venezolano
                    <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                        Arroz, carne mechada, caraotas (frijoles negros) y tajadas
                    </div>
                </button>-->
                <button class="option-btn" onclick="selectDish('hallaca')" style="background: linear-gradient(45deg, rgba(255,215,0,0.1), rgba(139,69,19,0.1)); border: 1px solid rgba(255,215,0,0.3);">
                    ü´î Hallaca Venezolana
                    <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                        Masa de ma√≠z rellena con guiso, envuelta en hoja de pl√°tano
                    </div>
                </button>
            </div>

            <!-- Paso 2: Acompa√±amiento -->
            <div id="step2" class="step-container step-hidden">
                <h3 class="step-title">Paso 2: Elige tu Acompa√±amiento</h3>
                <button class="option-btn" onclick="selectSide('pure')">ü•î Pur√© de Papa</button>
                <button class="option-btn" onclick="selectSide('arroz')">üçö Arroz</button>
            </div>

            <div id="step3" class="step-container step-hidden">
                <h3 class="step-title">Paso 3: Personaliza tu Plato (Opcional)</h3>
                <div class="extras-note">
                    <p>üí° Por defecto incluimos ensalada rallada y tajada</p>
                    <p>Puedes quitarlas si no las quieres tocando los botones</p>
                </div>
                <div class="extras-container">
                    <div class="extra-option">
                        <button class="toggle-btn active" id="ensaladaBtn" onclick="toggleExtra('ensalada')">
                            ü•ó Ensalada Rallada
                        </button>
                    </div>
                    <div class="extra-option">
                        <button class="toggle-btn active" id="tajadaBtn" onclick="toggleExtra('tajada')">
                            üçå Tajada
                        </button>
                    </div>
                </div>
            </div>

            <!-- Paso 2B: Opciones de Hallaca -->
            <div id="step2b" class="step-container step-hidden">
                <h3 class="step-title">Paso 2: Elige tu opci√≥n de Hallaca</h3>
                <button class="option-btn" onclick="selectHallacaOption('individual')" style="background: linear-gradient(45deg, rgba(255,215,0,0.1), rgba(139,69,19,0.1)); border: 1px solid rgba(255,215,0,0.3);">
                    ü´î Hallaca Individual
                    <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                        üí∞ $3.00 cada una
                    </div>
                </button>
                <button class="option-btn" onclick="selectHallacaOption('bulk')" style="background: linear-gradient(45deg, rgba(40,167,69,0.1), rgba(32,201,151,0.1)); border: 1px solid rgba(40,167,69,0.3);">
                    ü´î Hallacas por Mayor (10+ unidades)
                    <div style="font-size: 0.9rem; color: #28a745; margin-top: 8px; font-weight: bold;">
                        üí∞ $2.50 cada una (m√≠nimo 10)
                    </div>
                    <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                        Ideal para fiestas y reuniones familiares
                    </div>
                </button>
            </div>

            <!-- Paso 2C: Cantidad de Hallacas -->
            <div id="step2c" class="step-container step-hidden">
                <h3 class="step-title">Paso 3: ¬øCu√°ntas Hallacas quieres?</h3>
                <p style="color: #ccc; margin-bottom: 20px; text-align: center;">
                    Precio por mayor: <strong style="color: #28a745;">$2.50 cada una</strong> (m√≠nimo 10 unidades)
                </p>
                <div class="form-group">
                    <label for="hallacaQuantityInput">ü´î Cantidad de Hallacas:</label>
                    <input type="number" id="hallacaQuantityInput" class="text-input" placeholder="Ej: 12" min="10" value="10" required>
                    <small style="color: #999; font-size: 0.9rem;">M√≠nimo 10 unidades para precio por mayor</small>
                </div>
                <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setHallacaQuantity()">‚úÖ Confirmar Cantidad</button>
            </div>

            <!-- Paso 3: Personalizar Plato -->
            <div id="step3" class="step-container step-hidden">
                <h3 class="step-title">Paso 3: Personaliza tu Plato (Opcional)</h3>
                <div class="extras-note">
                    <p>üí° Por defecto incluimos ensalada rallada y tajada</p>
                    <p>Puedes quitarlas si no las quieres tocando los botones</p>
                </div>
                <div class="extras-container">
                    <div class="extra-option">
                        <button class="toggle-btn active" id="ensaladaBtn" onclick="toggleExtra('ensalada')">
                            ü•ó Ensalada Rallada
                        </button>
                    </div>
                    <div class="extra-option">
                        <button class="toggle-btn active" id="tajadaBtn" onclick="toggleExtra('tajada')">
                            üçå Tajada
                        </button>
                    </div>
                </div>
            </div>

            <!-- Paso 4: Para qui√©n es el pedido -->
            <div id="step4" class="step-container step-hidden">
                <h3 class="step-title">Paso 4: ¬øPara qui√©n es este pedido?</h3>
                <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
            </div>

            <!-- Resumen del Pedido -->
            <div id="orderSummary" class="order-summary step-hidden">
                <h3 class="summary-title">üìã Resumen de tu Pedido</h3>
                <div id="summaryContent"></div>
                <div class="price-display">
                    <strong style="font-size: 1.3rem; color: #4ecdc4;" id="orderPrice">üí∞ Precio: $5.00</strong>
                </div>
                <div style="margin-top: 20px;">
                    <button class="btn" style="background: linear-gradient(45deg, #1f4d1f, #2a5f2a); margin: 5px;" onclick="addAnotherOrder()">‚ûï Agregar Otro Pedido</button>
                    <button class="btn btn-order" onclick="proceedToCheckout()">üõí Continuar con el Pedido</button>
                </div>
            </div>

            <!-- Resumen de Todos los Pedidos -->
            <div id="allOrdersSummary" class="step-container step-hidden">
                <h3 class="step-title">üõí Todos tus Pedidos</h3>
                <div id="allOrdersContent"></div>
                <div class="total-price">
                    <h3 style="color: #ff6b6b; margin-top: 20px;">üí∞ Total: $<span id="totalPrice">0.00</span></h3>
                </div>
                <div style="margin-top: 20px;">
                    <button class="btn" style="background: linear-gradient(45deg, #1f4d1f, #2a5f2a); margin: 5px;" onclick="addAnotherOrder()">‚ûï Agregar Otro Pedido</button>
                    <button class="btn btn-order" onclick="showCustomerForm()">üìã Finalizar y Enviar Pedido</button>
                </div>
            </div>

            <!-- Formulario de Datos del Cliente -->
            <div id="customerForm" class="step-container step-hidden">
                <h3 class="step-title">üìù Informaci√≥n de Contacto</h3>
                <p style="color: #ccc; margin-bottom: 20px; text-align: center;">
                    Para procesar tu pedido necesitamos algunos datos b√°sicos
                </p>
                
                <div class="form-group">
                    <label for="customerName">üë§ ¬øC√≥mo te llamas?</label>
                    <input type="text" id="customerName" class="text-input" placeholder="Ej: Mar√≠a Gonz√°lez" required>
                </div>
                
                <div class="form-group">
                    <label for="customerPhone">üì± Tu n√∫mero de tel√©fono:</label>
                    <input type="tel" id="customerPhone" class="text-input" placeholder="Ej: 6825-7958" required>
                    <small style="color: #999; font-size: 0.9rem;">Para coordinar la entrega</small>
                </div>
                
                <div class="form-group">
                    <label for="customerAddress">üìç ¬øD√≥nde te entregamos?</label>
                    <textarea id="customerAddress" class="text-input" placeholder="Ej: Calle 50, Edificio Torres del Mar, Apto 5B, San Francisco" rows="3" required></textarea>
                    <small style="color: #999; font-size: 0.9rem;">Incluye referencias para encontrarte f√°cil</small>
                </div>
                
                <div class="form-group">
                    <label for="specialNotes">üìù Notas especiales (opcional):</label>
                    <textarea id="specialNotes" class="text-input" placeholder="Ej: Extra picante, entregar en la porter√≠a..." rows="3"></textarea>
                    <small style="color: #999; font-size: 0.9rem;">Cualquier solicitud especial o comentario</small>
                </div>
                
                <div class="privacy-note">
                    <p style="font-size: 0.85rem; color: #888; text-align: center; margin: 15px 0;">
                        üîí Tus datos solo se usan para este pedido y no se guardan
                    </p>
                </div>
                
                <button class="btn btn-order" onclick="sendFinalOrder()">üì± Enviar Pedido por WhatsApp</button>
            </div>

            <!-- Informaci√≥n de Pago -->
            <div class="payment-info">
                <h3 class="payment-title">üí≥ Medios de Pago</h3>
                <div class="payment-methods">
                    <div class="payment-method">
                        <strong>Efectivo</strong>
                        <span>üíµ</span>
                    </div>
                    <div class="payment-method">
                        <strong>Transferencia</strong>
                        <div>Banco General</div>
                        <div>Cta. Ahorro</div>
                        <div>04-20-99488149-0</div>
                    </div>
                    <div class="payment-method">
                        <strong>Yappy</strong>
                        <span>6825-7958</span>
                    </div>
                </div>
                
                <!-- Contacto Footer -->
                <div style="margin-top: 25px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 20px; flex-wrap: wrap;">
                        <div style="display: flex; align-items: center; gap: 8px; color: #b8b8b8;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="#b8b8b8">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                            <span>@lacocinadeanita507</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; color: #b8b8b8;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="#b8b8b8">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.531 3.488"/>
                            </svg>
                            <span>6825-7958</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Botones de Navegaci√≥n -->
            <div class="navigation-buttons">
                <button class="btn btn-back" onclick="goBack()">‚¨ÖÔ∏è Volver al Inicio</button>
            </div>
        </div>
    </div>

    <script>
        let currentOrder = {
            dishType: '',
            protein: '',
            side: '',
            hallacaOption: '',
            hallacaQuantity: 1,
            quantity: 1,
            ensalada: true,
            tajada: true,
            forWho: ''
        };
        
        let allOrders = [];
        let isDessertMode = false;
        let isSauceMode = false;
        let customerData = {
            name: '',
            phone: '',
            address: ''
        };

        function openSauceMenu() {
            isDessertMode = false;
            isSauceMode = true;
            showMenuScreen('üçù Men√∫ de Salsas Envasadas', 'Salsas artesanales Envasadas listas para calentar');
        }

        function openMenu() {
            isDessertMode = false;
            isSauceMode = false;
            showMenuScreen('üçΩÔ∏è Arma tu Comida', 'Selecciona tus opciones paso a paso');
        }

        function openDessertMenu() {
            isDessertMode = true;
            isSauceMode = false;
            showMenuScreen('üç∞ Men√∫ de Postres', 'Endulza tu d√≠a con nuestros postres caseros');
        }

        function showMenuScreen(title, subtitle) {
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('menuScreen').style.display = 'block';
            
            document.querySelector('.menu-title').textContent = title;
            document.querySelector('.menu-subtitle').textContent = subtitle;
            
            // Resetear y configurar pasos seg√∫n el modo
            resetSteps();
            setupInitialMenuSteps();
        }

        function setupInitialMenuSteps() {
            const step1 = document.getElementById('step1');
            const step1Title = step1.querySelector('.step-title');

            if (isSauceMode) {
                step1Title.textContent = 'Paso 1: Elige tu Salsa';
                step1.innerHTML = `
                    <h3 class="step-title">Paso 1: Elige tu Salsa</h3>
                    <button class="option-btn" onclick="selectSauce('bolognesa')" style="background: linear-gradient(45deg, rgba(139,69,19,0.1), rgba(160,82,45,0.1)); border: 1px solid rgba(139,69,19,0.3);">
                        üçù Salsa Bolognesa
                        <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                            Salsa cl√°sica con carne molida y tomate (24 oz)
                        </div>
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $5.00 cada una
                        </div>
                    </button>
                    <button class="option-btn" onclick="selectSauce('napoli')" style="background: linear-gradient(45deg, rgba(220,20,60,0.1), rgba(255,69,0,0.1)); border: 1px solid rgba(220,20,60,0.3);">
                        üçÖ Salsa Napoli
                        <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                            Salsa tradicional italiana de tomate (24 oz)
                        </div>
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $4.00 cada una
                        </div>
                    </button>
                    <button class="option-btn" onclick="selectSauce('costilla')" style="background: linear-gradient(45deg, rgba(101,67,33,0.1), rgba(139,90,43,0.1)); border: 1px solid rgba(101,67,33,0.3);">
                        ü•© Salsa Napoli con Costilla de Cerdo
                        <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                            Salsa rica en sabor con costilla de cerdo (24 oz)
                        </div>
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $6.00 cada una
                        </div>
                    </button>
                `;
            
            } else if (isDessertMode) {
                step1Title.textContent = 'Paso 1: Elige tu Postre';
                step1.innerHTML = `
                    <h3 class="step-title">Paso 1: Elige tu Postre</h3>
                    <button class="option-btn" onclick="selectDessert('dulce-maracuya')">
                        ü•≠ Dulce de Maracuy√° (Parchita)
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $2.00 cada uno
                        </div>
                    </button>
                    <button class="option-btn" onclick="selectDessert('dulce-limon')">
                        üçã Dulce de Lim√≥n
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $2.00 cada uno
                        </div>
                    </button>
                    <button class="option-btn" onclick="selectDessert('arroz-con-leche')">
                        üçö Arroz con Leche
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $2.00 cada uno
                        </div>
                    </button>
                    <button class="option-btn" onclick="selectDessert('marquesa-chocolate')">
                        üç´ Marquesa de Chocolate
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $2.00 cada uno
                        </div>
                    </button>
                `;
            } else {
                step1Title.textContent = 'Paso 1: Elige tu Plato Principal';
                step1.innerHTML = `
                    <h3 class="step-title">Paso 1: Elige tu Plato Principal</h3>
                <!--<button class="option-btn" onclick="selectDish('milanesa-pollo')">üêî Milanesa de Pollo <div><div> (NO DISPONIBLE) </button>
                    <button class="option-btn" onclick="selectDish('milanesa-carne')">ü•© Milanesa de Carne <div><div> (NO DISPONIBLE) </button> -->
                <!--<button class="option-btn" onclick="selectDish('pasta-corta')" style="background: linear-gradient(45deg, rgba(139,69,19,0.1), rgba(160,82,45,0.1)); border: 1px solid rgba(139,69,19,0.3);">
                        üçù Pasta corta a la Bolognesa
                        <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                            Pasta corta, salsa bolognesa, pan de ajo y tajada
                        </div>
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $4.00 cada una
                        </div>
                    </button> -->
                    <button class="option-btn" onclick="selectDish('pasta-costilla')" style="background: linear-gradient(45deg, rgba(101,67,33,0.1), rgba(139,90,43,0.1)); border: 1px solid rgba(101,67,33,0.3);">
                        üçù Pasta corta con Salsa de Costilla de Cerdo
                        <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                            Pasta corta con salsa de costilla de cerdo, pan de ajo y tajada
                        </div>
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $5.00 cada una
                        </div>
                    </button>
                    <button class="option-btn" onclick="selectDish('pollo-frito')" style="background: linear-gradient(45deg, rgba(255,140,0,0.1), rgba(255,165,0,0.1)); border: 1px solid rgba(255,140,0,0.3);">
                        üçó Pollo Frito con Pur√© y Tajadas
                        <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                            Pollo frito dorado, pur√© de papa cremoso y tajadas de pl√°tano
                        </div>
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $5.00 cada una
                        </div>
                    </button>
                    <button class="option-btn" onclick="selectDish('lasagna')" style="background: linear-gradient(45deg, rgba(139,69,19,0.1), rgba(160,82,45,0.1)); border: 1px solid rgba(139,69,19,0.3);">
                        üçù Lasagna (Pasticho)
                        <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                            Capas de pasta con salsa bolognesa, queso y bechamel
                        </div>
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $5.00 cada una
                        </div>
                    </button>
                <!--<button class="option-btn" onclick="selectDish('pabellon')" style="background: linear-gradient(45deg, rgba(255,193,7,0.1), rgba(220,53,69,0.1)); border: 1px solid rgba(255,193,7,0.3);">
                        üáªüá™ Pabell√≥n Criollo Venezolano
                        <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                            Arroz, carne mechada, caraotas (frijoles negros) y tajadas
                        </div>
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $5.00 cada una
                        </div>
                    </button>-->
                    <button class="option-btn" onclick="selectDish('hallaca')" style="background: linear-gradient(45deg, rgba(255,215,0,0.1), rgba(139,69,19,0.1)); border: 1px solid rgba(255,215,0,0.3);">
                        ü´î Hallaca Venezolana
                        <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                            Masa de ma√≠z rellena con guiso, envuelta en hoja de pl√°tano
                        </div>
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ Dos opciones de precio
                        </div>
                    </button>
                `;
            }
        }

        // Mantener setupMenuSteps() para cuando se agrega otro pedido
        function setupMenuSteps() {
            const step1 = document.getElementById('step1');
            const step1Title = step1.querySelector('.step-title');
            
            if (isDessertMode) {
                step1Title.textContent = 'Paso 1: Elige tu Postre';
                step1.innerHTML = `
                    <h3 class="step-title">Paso 1: Elige tu Postre</h3>
                    <button class="option-btn" onclick="selectDessert('dulce-maracuya')">
                        ü•≠ Dulce de Maracuy√° (Parchita)
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $2.00 cada uno
                        </div>
                    </button>
                    <button class="option-btn" onclick="selectDessert('dulce-limon')">
                        üçã Dulce de Lim√≥n
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $2.00 cada uno
                        </div>
                    </button>
                    <button class="option-btn" onclick="selectDessert('arroz-con-leche')">
                        üçö Arroz con Leche
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $2.00 cada uno
                        </div>
                    </button>
                `;
            } else {
                step1Title.textContent = 'Paso 1: Elige tu Plato Principal';
                step1.innerHTML = `
                    <h3 class="step-title">Paso 1: Elige tu Plato Principal</h3>
                <!--<button class="option-btn" onclick="selectDish('milanesa-pollo')">üêî Milanesa de Pollo</button>
                    <button class="option-btn" onclick="selectDish('milanesa-carne')">ü•© Milanesa de Carne</button> -->
                <!--<button class="option-btn" onclick="selectDish('pasta-corta')" style="background: linear-gradient(45deg, rgba(139,69,19,0.1), rgba(160,82,45,0.1)); border: 1px solid rgba(139,69,19,0.3);">
                        üçù Pasta corta a la Bolognesa
                        <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                            Pasta corta, salsa bolognesa, pan de ajo y tajada
                        </div>
                    </button>v -->
                    <button class="option-btn" onclick="selectDish('pasta-costilla')" style="background: linear-gradient(45deg, rgba(101,67,33,0.1), rgba(139,90,43,0.1)); border: 1px solid rgba(101,67,33,0.3);">
                        üçù Pasta corta con Salsa de Costilla de Cerdo
                        <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                            Pasta corta con salsa de costilla de cerdo, pan de ajo y tajada
                        </div>
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $5.00 cada una
                        </div>
                    </button>
                    <button class="option-btn" onclick="selectDish('pollo-frito')" style="background: linear-gradient(45deg, rgba(255,140,0,0.1), rgba(255,165,0,0.1)); border: 1px solid rgba(255,140,0,0.3);">
                        üçó Pollo Frito con Pur√© y Tajadas
                        <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                            Pollo frito dorado, pur√© de papa cremoso y tajadas de pl√°tano
                        </div>
                        <div style="font-size: 0.9rem; color: #4ecdc4; margin-top: 8px; font-weight: bold;">
                            üí∞ $5.00 cada una
                        </div>
                    </button>
                <!--<button class="option-btn" onclick="selectDish('pabellon')" style="background: linear-gradient(45deg, rgba(255,193,7,0.1), rgba(220,53,69,0.1)); border: 1px solid rgba(255,193,7,0.3);">
                        üáªüá™ Pabell√≥n Criollo Venezolano
                        <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                            Arroz, carne mechada, caraotas (frijoles negros) y tajadas
                        </div>
                    </button>-->
                    <button class="option-btn" onclick="selectDish('hallaca')" style="background: linear-gradient(45deg, rgba(255,215,0,0.1), rgba(139,69,19,0.1)); border: 1px solid rgba(255,215,0,0.3);">
                        ü´î Hallaca Venezolana
                        <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                            Masa de ma√≠z rellena con guiso, envuelta en hoja de pl√°tano
                        </div>
                    </button>
                `;
            }
        }

        function selectSauce(sauceType) {
            currentOrder.dishType = sauceType;
            currentOrder.protein = sauceType + '-sauce';
            currentOrder.side = 'salsa-envasada-24oz';
            currentOrder.ensalada = false;
            currentOrder.tajada = false;
            
            document.querySelectorAll('#step1 .option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            setTimeout(() => {
                showQuantitySelector();
            }, 300);
        }

        function selectDessert(dessertType) {
            currentOrder.dishType = dessertType;
            if (dessertType === 'dulce-maracuya') {
                currentOrder.protein = 'dulce-maracuya';
            } else if (dessertType === 'dulce-limon') {
                currentOrder.protein = 'dulce-limon';
            } else if (dessertType === 'arroz-con-leche') {
                currentOrder.protein = 'arroz-con-leche';
            } else if (dessertType === 'marquesa-chocolate') {
                currentOrder.protein = 'marquesa-chocolate';
            }            
            currentOrder.side = 'postre-casero';
            currentOrder.ensalada = false;
            currentOrder.tajada = false;
            
            document.querySelectorAll('#step1 .option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            setTimeout(() => {
                showQuantitySelector();
            }, 300);
        }

        function showQuantitySelector() {
            // Crear un nuevo contenedor para el selector de cantidad para milanesas
            let targetContainer;
            let title = 'Paso 2: ¬øCu√°ntos quieres?';
            let maxQuantity = 20;
            
            // Si es milanesa, usar un paso diferente (despu√©s de acompa√±amientos)
            if (currentOrder.dishType === 'milanesa-pollo' || currentOrder.dishType === 'milanesa-carne') {
                targetContainer = document.getElementById('step4'); // Reutilizar step4 pero cambiar contenido
                title = 'Paso 4: ¬øCu√°ntos quieres?';
            } else if (currentOrder.dishType === 'hallaca' && currentOrder.hallacaOption === 'individual') {
                // Para hallacas individuales, es el paso 3 (despu√©s de elegir el tipo)
                targetContainer = document.getElementById('step2');
                maxQuantity = 9;
                title = 'Paso 3: ¬øCu√°ntas Hallacas? (m√°ximo 9)';
            } else {
                // Para otros platos (pabell√≥n, postres), usar step2 como siempre
                targetContainer = document.getElementById('step2');
            }
            
            targetContainer.innerHTML = `
                <h3 class="step-title">${title}</h3>
                <div style="display: flex; align-items: center; justify-content: center; gap: 20px; margin: 20px 0;">
                    <button class="btn" onclick="changeQuantity(-1)" style="width: 15px; height: 32px; font-size: 0.9rem; padding: 0; border-radius: 4px; line-height: 1;">‚ûñ</button>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: #4ecdc4;">${currentOrder.quantity}</div>
                        <div style="color: #ccc; margin-top: 5px;">unidades</div>
                    </div>
                    <button class="btn" onclick="changeQuantity(1)" style="width: 15px; height: 32px; font-size: 0.9rem; padding: 0; border-radius: 4px; line-height: 1;">‚ûï</button>
                </div>
                <div class="price-display">
                    <strong style="font-size: 1.2rem; color: #4ecdc4;" id="quantityPrice">üí∞ Total: $${(getCurrentPrice() * currentOrder.quantity).toFixed(2)}</strong>
                </div>
                <button class="btn" style="width: 100%; margin-top: 15px;" onclick="confirmQuantity()">‚úÖ Confirmar Cantidad</button>
            `;
            
            targetContainer.classList.remove('step-hidden');
            targetContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function getCurrentPrice() {
            if (isSauceMode) {
                if (currentOrder.dishType === 'napoli') return 4.00;
                if (currentOrder.dishType === 'bolognesa') return 5.00;
                if (currentOrder.dishType === 'costilla') return 6.00;
            }
        
            if (currentOrder.dishType === 'hallaca' && currentOrder.hallacaOption === 'individual') return 3.00;
            if (currentOrder.dishType === 'hallaca' && currentOrder.hallacaOption === 'bulk') return 2.50;
            if (currentOrder.dishType === 'pabellon') return 5.00;
            if (currentOrder.dishType === 'pasta-corta') return 4.00;
            if (currentOrder.dishType === 'arroz-con-leche') return 2.00;
            if (currentOrder.dishType === 'dulce-limon') return 2.00;
            if (currentOrder.dishType === 'dulce-maracuya') return 2.00;
            if (currentOrder.dishType === 'pasta-costilla') return 5.00;
            if (currentOrder.dishType === 'pollo-frito') return 5.00;
            if (currentOrder.dishType === 'lasagna') return 5.00;
            if (currentOrder.dishType === 'marquesa-chocolate') return 2.00;
            return 5.00; // milanesas
        }

        function changeQuantity(change) {
            let maxQuantity = 100;
            
            if (currentOrder.dishType === 'hallaca' && currentOrder.hallacaOption === 'individual') {
                maxQuantity = 9;
            }
            
            const newQuantity = currentOrder.quantity + change;
            
            if (newQuantity >= 1 && newQuantity <= maxQuantity) {
                currentOrder.quantity = newQuantity;
                
                // Buscar el display de cantidad en el contenedor activo
                let quantityDisplay = null;
                let priceDisplay = null;
                
                // Primero buscar en step2 (para hallacas y postres)
                const step2 = document.getElementById('step2');
                if (!step2.classList.contains('step-hidden')) {
                    quantityDisplay = step2.querySelector('div[style*="font-size: 2rem"]');
                    priceDisplay = step2.querySelector('#quantityPrice');
                }
                
                // Si no est√° en step2, buscar en step4 (para milanesas)
                if (!quantityDisplay) {
                    const step4 = document.getElementById('step4');
                    if (!step4.classList.contains('step-hidden')) {
                        quantityDisplay = step4.querySelector('div[style*="font-size: 2rem"]');
                        priceDisplay = step4.querySelector('#quantityPrice');
                    }
                }

                // Si no est√° en step4, buscar en step2c (para hallacas individuales)
                if (!quantityDisplay) {
                    const step2c = document.getElementById('step2c');
                    if (!step2c.classList.contains('step-hidden')) {
                        quantityDisplay = step2c.querySelector('div[style*="font-size: 2rem"]');
                        priceDisplay = step2c.querySelector('#quantityPrice');
                    }
                }
                
                // Actualizar display de cantidad
                if (quantityDisplay) {
                    quantityDisplay.textContent = currentOrder.quantity;
                }
                
                // Actualizar precio
                if (priceDisplay) {
                    const totalPrice = getCurrentPrice() * currentOrder.quantity;
                    priceDisplay.innerHTML = `üí∞ Total: ${totalPrice.toFixed(2)}`;
                }
            }
        }

        function confirmQuantity() {
            if (isSauceMode) {
                // Para salsas - ir al paso "para qui√©n es"
                setTimeout(() => {
                    const step4 = document.getElementById('step4');
                    step4.innerHTML = `
                        <h3 class="step-title">Paso 3: ¬øPara qui√©n es este pedido?</h3>
                        <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                        <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
                    `;
                    step4.classList.remove('step-hidden');
                    step4.scrollIntoView({ behavior: 'smooth' });
                }, 300);
            } else if (isDessertMode) {
                // Para postres - ir al paso "para qui√©n es"
                setTimeout(() => {
                    const step4 = document.getElementById('step4');
                    step4.innerHTML = `
                        <h3 class="step-title">Paso 3: ¬øPara qui√©n es este pedido?</h3>
                        <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                        <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
                    `;
                    step4.classList.remove('step-hidden');
                    step4.scrollIntoView({ behavior: 'smooth' });
                }, 300);
            } else if (currentOrder.dishType === 'arroz-con-leche') {
                // Para arroz con leche - ir al paso "para qui√©n es"
                setTimeout(() => {
                    const step4 = document.getElementById('step4');
                    step4.innerHTML = `
                        <h3 class="step-title">Paso 3: ¬øPara qui√©n es este pedido?</h3>
                        <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                        <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
                    `;
                    step4.classList.remove('step-hidden');
                    step4.scrollIntoView({ behavior: 'smooth' });
                }, 300);
            } else if (currentOrder.dishType === 'pasta-costilla') {
                // Para pasta con costilla - ir al paso "para qui√©n es"
                setTimeout(() => {
                    const step4 = document.getElementById('step4');
                    step4.innerHTML = `
                        <h3 class="step-title">Paso 3: ¬øPara qui√©n es este pedido?</h3>
                        <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                        <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
                    `;
                    step4.classList.remove('step-hidden');
                    step4.scrollIntoView({ behavior: 'smooth' });
                }, 300);
            } else if (currentOrder.dishType === 'pollo-frito') {
                // Para pollo frito - ir al paso "para qui√©n es"
                setTimeout(() => {
                    const step4 = document.getElementById('step4');
                    step4.innerHTML = `
                        <h3 class="step-title">Paso 3: ¬øPara qui√©n es este pedido?</h3>
                        <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                        <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
                    `;
                    step4.classList.remove('step-hidden');
                    step4.scrollIntoView({ behavior: 'smooth' });
                }, 300);
            } else if (currentOrder.dishType === 'pabellon') {
                // Para pabell√≥n - ir directamente al paso "para qui√©n es"
                setTimeout(() => {
                    const step4 = document.getElementById('step4');
                    step4.innerHTML = `
                        <h3 class="step-title">Paso 3: ¬øPara qui√©n es este pedido?</h3>
                        <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                        <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
                    `;
                    step4.classList.remove('step-hidden');
                    step4.scrollIntoView({ behavior: 'smooth' });
                }, 300);
            } else if (currentOrder.dishType === 'pasta-corta') {
                // Para pasta corta - ir directamente al paso "para qui√©n es"
                setTimeout(() => {
                    const step4 = document.getElementById('step4');
                    step4.innerHTML = `
                        <h3 class="step-title">Paso 3: ¬øPara qui√©n es este pedido?</h3>
                        <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                        <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
                    `;
                    step4.classList.remove('step-hidden');
                    step4.scrollIntoView({ behavior: 'smooth' });
                }, 300);
            } else if (currentOrder.dishType === 'dulce-limon') {
                // Para dulce de lim√≥n - ir al paso "para qui√©n es"
                setTimeout(() => {
                    const step4 = document.getElementById('step4');
                    step4.innerHTML = `
                        <h3 class="step-title">Paso 3: ¬øPara qui√©n es este pedido?</h3>
                        <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                        <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
                    `;
                    step4.classList.remove('step-hidden');
                    step4.scrollIntoView({ behavior: 'smooth' });
                }, 300);
            } else if (currentOrder.dishType === 'lasagna') {
                // Para lasagna - ir al paso "para qui√©n es"
                setTimeout(() => {
                    const step4 = document.getElementById('step4');
                    step4.innerHTML = `
                        <h3 class="step-title">Paso 3: ¬øPara qui√©n es este pedido?</h3>
                        <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                        <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
                    `;
                    step4.classList.remove('step-hidden');
                    step4.scrollIntoView({ behavior: 'smooth' });
                }, 300);
            } else if (currentOrder.dishType === 'marquesa-chocolate') {
                // Para marquesa de chocolate - ir al paso "para qui√©n es"
                setTimeout(() => {
                    const step4 = document.getElementById('step4');
                    step4.innerHTML = `
                        <h3 class="step-title">Paso 3: ¬øPara qui√©n es este pedido?</h3>
                        <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                        <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
                    `;
                    step4.classList.remove('step-hidden');
                    step4.scrollIntoView({ behavior: 'smooth' });
                }, 300);
            } else if (currentOrder.dishType === 'hallaca' && currentOrder.hallacaOption === 'individual') {
                // Para hallacas individuales - ir al paso "para qui√©n es"
                setTimeout(() => {
                    const step4 = document.getElementById('step4');
                    step4.innerHTML = `
                        <h3 class="step-title">Paso 3: ¬øPara qui√©n es este pedido?</h3>
                        <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                        <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
                    `;
                    step4.classList.remove('step-hidden');
                    step4.scrollIntoView({ behavior: 'smooth' });
                }, 300);
            } else if (currentOrder.dishType === 'milanesa-pollo' || currentOrder.dishType === 'milanesa-carne') {
                // Para milanesas - crear un contenedor temporal para "para qui√©n es"
                setTimeout(() => {
                    // Ocultar el selector de cantidad actual
                    document.getElementById('step4').classList.add('step-hidden');
                    
                    // Crear un div temporal despu√©s del step4
                    let tempStep = document.getElementById('tempForWhoStep');
                    if (!tempStep) {
                        tempStep = document.createElement('div');
                        tempStep.id = 'tempForWhoStep';
                        tempStep.className = 'step-container';
                        document.getElementById('step4').parentNode.insertBefore(tempStep, document.getElementById('orderSummary'));
                    }
                    
                    tempStep.innerHTML = `
                        <h3 class="step-title">Paso 5: ¬øPara qui√©n es este pedido?</h3>
                        <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                        <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
                    `;
                    
                    tempStep.classList.remove('step-hidden');
                    tempStep.scrollIntoView({ behavior: 'smooth' });
                }, 300);
            }
            }

        function closeApp() {
            if (confirm('¬øEst√°s seguro de que quieres cerrar la aplicaci√≥n?')) {
                window.close();
            }
        }

        function openInstagram() {
            window.open('https://www.instagram.com/lacocinadeanita507/', '_blank');
        }

        function openWhatsApp() {
            window.open('https://wa.me/50768257958', '_blank');
        }

        function selectDish(dishType) {
            currentOrder.dishType = dishType;
            
            // Marcar opci√≥n seleccionada
            document.querySelectorAll('#step1 .option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            if (dishType === 'pabellon') {
                // Para pabell√≥n, ir al selector de cantidad (paso 2)
                currentOrder.protein = 'carne-mechada';
                currentOrder.side = 'arroz-caraotas';
                currentOrder.ensalada = false; // Pabell√≥n no lleva ensalada
                currentOrder.tajada = true; // Ya viene incluida
                
                setTimeout(() => {
                    showQuantitySelector();
                }, 300);

        } else if (dishType === 'hallaca') {
            // Para hallaca, ir al paso 2b (opciones de hallaca)
            currentOrder.protein = 'hallaca-venezolana';
            currentOrder.side = 'hallaca-completa';
            currentOrder.ensalada = false; // Hallaca no lleva ensalada
            currentOrder.tajada = false; // Hallaca no lleva tajada
            
            setTimeout(() => {
                document.getElementById('step2b').classList.remove('step-hidden');
                document.getElementById('step2b').scrollIntoView({ behavior: 'smooth' });
            }, 300);
        } else if (dishType === 'pasta-corta') {
            // Para pasta corta, ir al selector de cantidad (sin acompa√±amientos)
            currentOrder.protein = 'pasta-corta';
            currentOrder.side = 'pasta-completa';
            currentOrder.ensalada = false; // Pasta no lleva ensalada
            currentOrder.tajada = true; // Ya viene incluida
            
            setTimeout(() => {
                showQuantitySelector();
            }, 300);
        } else if (dishType === 'pasta-costilla') {
            // Para pasta con costilla, ir al selector de cantidad (sin acompa√±amientos)
            currentOrder.protein = 'pasta-costilla';
            currentOrder.side = 'pasta-completa-costilla';
            currentOrder.ensalada = false; // Pasta no lleva ensalada
            currentOrder.tajada = true; // Ya viene incluida
            
            setTimeout(() => {
                showQuantitySelector();
            }, 300);
        } else if (dishType === 'pollo-frito') {
            // Para pollo frito, ir al selector de cantidad (sin acompa√±amientos)
            currentOrder.protein = 'pollo-frito';
            currentOrder.side = 'pollo-completo';
            currentOrder.ensalada = false; // Pollo frito no lleva ensalada
            currentOrder.tajada = true; // Ya viene incluida
            
            setTimeout(() => {
                showQuantitySelector();
            }, 300);
        } else if (dishType === 'lasagna') {
            // Para lasagna, ir al selector de cantidad (sin acompa√±amientos)
            currentOrder.protein = 'lasagna';
            currentOrder.side = 'lasagna-completa';
            currentOrder.ensalada = false; // Lasagna no lleva ensalada
            currentOrder.tajada = false; // Lasagna no lleva tajada
            
            setTimeout(() => {
                showQuantitySelector();
            }, 300);
            } else {
                // Para milanesas, mostrar paso 2 (acompa√±amiento)
                currentOrder.protein = dishType === 'milanesa-pollo' ? 'pollo' : 'carne';
            
                setTimeout(() => {
                    document.getElementById('step2').classList.remove('step-hidden');
                    document.getElementById('step2').scrollIntoView({ behavior: 'smooth' });
                }, 300);
            }
        } 
    
            function selectHallacaOption(option) {
            currentOrder.hallacaOption = option;
            
            document.querySelectorAll('#step2b .option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            if (option === 'individual') {
                currentOrder.hallacaQuantity = 1;
                setTimeout(() => {
                    // Para hallacas individuales, crear el selector de cantidad en step2c (paso 3)
                    const step2c = document.getElementById('step2c');
                    step2c.innerHTML = `
                        <h3 class="step-title">Paso 3: ¬øCu√°ntas Hallacas? (m√°ximo 9)</h3>
                        <div style="display: flex; align-items: center; justify-content: center; gap: 20px; margin: 20px 0;">
                            <button class="btn" onclick="changeQuantity(-1)" style="width: 15px; height: 32px; font-size: 0.9rem; padding: 0; border-radius: 4px; line-height: 1;">‚ûñ</button>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: #4ecdc4;">${currentOrder.quantity}</div>
                                <div style="color: #ccc; margin-top: 5px;">unidades</div>
                            </div>
                            <button class="btn" onclick="changeQuantity(1)" style="width: 15px; height: 32px; font-size: 0.9rem; padding: 0; border-radius: 4px; line-height: 1;">‚ûï</button>
                        </div>
                        <div class="price-display">
                            <strong style="font-size: 1.2rem; color: #4ecdc4;" id="quantityPrice">üí∞ Total: ${(3.00 * currentOrder.quantity).toFixed(2)}</strong>
                        </div>
                        <button class="btn" style="width: 100%; margin-top: 15px;" onclick="confirmQuantity()">‚úÖ Confirmar Cantidad</button>
                    `;
                    step2c.classList.remove('step-hidden');
                    step2c.scrollIntoView({ behavior: 'smooth' });
                }, 300);
            } else if (option === 'bulk') {
                setTimeout(() => {
                    document.getElementById('step2c').classList.remove('step-hidden');
                    document.getElementById('step2c').scrollIntoView({ behavior: 'smooth' });
                }, 300);
            }
        }

        function setHallacaQuantity() {
            const quantity = parseInt(document.getElementById('hallacaQuantityInput').value);
            if (!quantity || quantity < 10) {
                alert('Para precio por mayor necesitas m√≠nimo 10 hallacas');
                return;
            }
            
            currentOrder.hallacaQuantity = quantity;
            
            // Para hallacas por mayor, ir directamente al "para qui√©n es"
            setTimeout(() => {
                const step4 = document.getElementById('step4');
                step4.innerHTML = `
                    <h3 class="step-title">Paso 4: ¬øPara qui√©n es este pedido?</h3>
                    <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                    <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
                `;
                step4.classList.remove('step-hidden');
                step4.scrollIntoView({ behavior: 'smooth' });
            }, 300);
        }

        function selectSide(side) {
            currentOrder.side = side;
            
            document.querySelectorAll('#step2 .option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            setTimeout(() => {
                document.getElementById('step3').classList.remove('step-hidden');
                document.getElementById('step3').scrollIntoView({ behavior: 'smooth' });
                
                // Agregar bot√≥n para continuar despu√©s de personalizar
                const step3 = document.getElementById('step3');
                if (!step3.querySelector('.continue-btn')) {
                    const continueBtn = document.createElement('button');
                    continueBtn.className = 'btn continue-btn';
                    continueBtn.style.width = '100%';
                    continueBtn.style.marginTop = '20px';
                    continueBtn.textContent = '‚û°Ô∏è Continuar';
                    continueBtn.onclick = () => showQuantitySelector();
                    step3.appendChild(continueBtn);
                }
            }, 300);
        }

        function toggleExtra(extra) {
            currentOrder[extra] = !currentOrder[extra];
            
            const btn = document.getElementById(extra + 'Btn');
            if (currentOrder[extra]) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        }

        function setOrderRecipient() {
            const forWho = document.getElementById('forWhoInput').value.trim();
            if (!forWho) {
                alert('Por favor, indica para qui√©n es este pedido');
                return;
            }
            
            currentOrder.forWho = forWho;
            showOrderSummary();
        }

        function showOrderSummary() {
            document.getElementById('orderSummary').classList.remove('step-hidden');
            updateOrderSummary();
            setTimeout(() => {
                document.getElementById('orderSummary').scrollIntoView({ behavior: 'smooth' });
            }, 300);
        }

        function updateOrderSummary() {
            let proteinText = '';
            let sideText = '';
            let priceText = '$5.00';
            let totalPrice = 5.00;
            
            if (isSauceMode) {
                const sauceNames = {
                    'bolognesa': 'Salsa Bolognesa',
                    'napoli': 'Salsa Napoli', 
                    'costilla': 'Salsa Napoli con Costilla de Cerdo'
                };
                proteinText = `${currentOrder.quantity}x ${sauceNames[currentOrder.dishType]}`;
                sideText = 'Salsa artesanal Envasada de 24 onzas, lista para calentar';
                
                if (currentOrder.dishType === 'napoli') {
                    totalPrice = 4.00 * currentOrder.quantity;
                    priceText = currentOrder.quantity > 1 ? `$${totalPrice.toFixed(2)} (${currentOrder.quantity} x $4.00)` : '$4.00';
                } else if (currentOrder.dishType === 'bolognesa') {
                    totalPrice = 5.00 * currentOrder.quantity;
                    priceText = currentOrder.quantity > 1 ? `$${totalPrice.toFixed(2)} (${currentOrder.quantity} x $5.00)` : '$5.00';
                } else if (currentOrder.dishType === 'costilla') {
                    totalPrice = 6.00 * currentOrder.quantity;
                    priceText = currentOrder.quantity > 1 ? `$${totalPrice.toFixed(2)} (${currentOrder.quantity} x $6.00)` : '$6.00';
                }
    
            } else if (isDessertMode) {
                if (currentOrder.dishType === 'dulce-maracuya') {
                    proteinText = `${currentOrder.quantity}x Dulce de Maracuy√° (Parchita)`;
                    totalPrice = 2.00 * currentOrder.quantity;
                } else if (currentOrder.dishType === 'dulce-limon') {
                    proteinText = `${currentOrder.quantity}x Dulce de Lim√≥n`;
                    totalPrice = 2.00 * currentOrder.quantity;
                } else if (currentOrder.dishType === 'arroz-con-leche') {
                    proteinText = `${currentOrder.quantity}x Arroz con Leche`;
                    totalPrice = 2.00 * currentOrder.quantity;
                } else if (currentOrder.dishType === 'marquesa-chocolate') {
                    proteinText = `${currentOrder.quantity}x Marquesa de Chocolate`;
                    totalPrice = 2.00 * currentOrder.quantity;
                }
                sideText = 'Postre casero artesanal';
                priceText = currentOrder.quantity > 1 ? `$${totalPrice.toFixed(2)} (${currentOrder.quantity} x $${(totalPrice/currentOrder.quantity).toFixed(2)})` : `$${totalPrice.toFixed(2)}`;
            } else if (currentOrder.dishType === 'pabellon') {
                proteinText = `${currentOrder.quantity}x Pabell√≥n Criollo Venezolano`;
                sideText = 'Arroz blanco, carne mechada, caraotas (frijoles negros) y tajadas de pl√°tano';
                totalPrice = 5.00 * currentOrder.quantity;
                priceText = currentOrder.quantity > 1 ? `${totalPrice.toFixed(2)} (${currentOrder.quantity} x $5.00)` : '$5.00';
            } else if (currentOrder.dishType === 'pasta-corta') {
                proteinText = `${currentOrder.quantity}x Pasta corta a la Bolognesa`;
                sideText = 'Pasta corta con salsa bolognesa, pan de ajo y tajada de pl√°tano';
                totalPrice = 4.00 * currentOrder.quantity;
                priceText = currentOrder.quantity > 1 ? `${totalPrice.toFixed(2)} (${currentOrder.quantity} x $4.00)` : '$4.00';
            } else if (currentOrder.dishType === 'pasta-costilla') {
                orderPrice = 5.00 * currentOrder.quantity;
                proteinText = `${currentOrder.quantity}x Pasta corta con Salsa de Costilla de Cerdo`;
                sideText = 'Pasta corta con salsa de costilla de cerdo, pan de ajo y tajada';
                totalPrice = 5.00 * currentOrder.quantity;
                priceText = currentOrder.quantity > 1 ? `${totalPrice.toFixed(2)} (${currentOrder.quantity} x $5.00)` : '$5.00';
            } else if (currentOrder.dishType === 'pollo-frito') {
                proteinText = `${currentOrder.quantity}x Pollo Frito con Pur√© y Tajadas`;
                sideText = 'Pollo frito dorado, pur√© de papa cremoso y tajadas de pl√°tano';
                totalPrice = 5.00 * currentOrder.quantity;
                priceText = currentOrder.quantity > 1 ? `$${totalPrice.toFixed(2)} (${currentOrder.quantity} x $5.00)` : '$5.00';
            } else if (currentOrder.dishType === 'lasagna') {
                proteinText = `${currentOrder.quantity}x Lasagna (Pasticho)`;
                sideText = 'Capas de pasta con salsa bolognesa, queso y bechamel';
                totalPrice = 5.00 * currentOrder.quantity;
                priceText = currentOrder.quantity > 1 ? `$${totalPrice.toFixed(2)} (${currentOrder.quantity} x $5.00)` : '$5.00';
            } else if (currentOrder.dishType === 'marquesa-chocolate') {
                proteinText = `${currentOrder.quantity}x Marquesa de Chocolate`;
                sideText = 'Postre casero artesanal';
                totalPrice = 2.00 * currentOrder.quantity;
                priceText = currentOrder.quantity > 1 ? `$${totalPrice.toFixed(2)} (${currentOrder.quantity} x $2.00)` : '$2.00';
            } else if (currentOrder.dishType === 'hallaca') {
                if (currentOrder.hallacaOption === 'individual') {
                    proteinText = `${currentOrder.quantity}x Hallaca${currentOrder.quantity > 1 ? 's' : ''} Venezolana${currentOrder.quantity > 1 ? 's' : ''} Individual${currentOrder.quantity > 1 ? 'es' : ''}`;
                    sideText = 'Masa de ma√≠z rellena con guiso de carne, pollo, cerdo y aceitunas, envuelta en hoja de pl√°tano';
                    totalPrice = 3.00 * currentOrder.quantity;
                    priceText = currentOrder.quantity > 1 ? `${totalPrice.toFixed(2)} (${currentOrder.quantity} x $3.00)` : '$3.00';
                } else {
                    proteinText = `${currentOrder.hallacaQuantity} Hallacas Venezolanas (Por Mayor)`;
                    sideText = 'Masa de ma√≠z rellena con guiso de carne, pollo, cerdo y aceitunas, envuelta en hoja de pl√°tano';
                    totalPrice = currentOrder.hallacaQuantity * 2.50;
                    priceText = `${totalPrice.toFixed(2)} (${currentOrder.hallacaQuantity} x $2.50)`;
                }
            } else {
                const dishName = currentOrder.protein === 'pollo' ? 'Milanesa de Pollo' : 'Milanesa de Carne';
                proteinText = `${currentOrder.quantity}x ${dishName}`;
                sideText = currentOrder.side === 'pure' ? 'Pur√© de Papa' : 'Arroz';
                totalPrice = 5.00 * currentOrder.quantity;
                priceText = currentOrder.quantity > 1 ? `${totalPrice.toFixed(2)} (${currentOrder.quantity} x $5.00)` : '$5.00';
            }           
            
            let summaryHTML = `
                <div class="summary-item">
                    <strong>üë§ Para:</strong> ${currentOrder.forWho}
                </div>
                <div class="summary-item">
                    <strong>üçΩÔ∏è ${isSauceMode ? 'Salsa' : (isDessertMode ? 'Postre' : 'Plato')}:</strong> ${proteinText}
                </div>
            `;

            if (isSauceMode) {
                summaryHTML += `
                    <div class="summary-item">
                        <strong>üçù Descripci√≥n:</strong> ${sideText}
                    </div>
                `;
            } else if (!isDessertMode) {
                if (currentOrder.dishType !== 'pabellon' && currentOrder.dishType !== 'hallaca' && currentOrder.dishType !== 'pasta-corta' && currentOrder.dishType !== 'lasagna' && currentOrder.dishType !== 'marquesa-chocolate') {
                    summaryHTML += `
                        <div class="summary-item">
                            <strong>üçΩÔ∏è Acompa√±amiento:</strong> ${sideText}
                        </div>
                        <div class="summary-item">
                            <strong>ü•ó Ensalada Rallada:</strong> ${currentOrder.ensalada ? '‚úÖ Incluida' : '‚ùå Sin ensalada'}
                        </div>
                        <div class="summary-item">
                            <strong>üçå Tajada:</strong> ${currentOrder.tajada ? '‚úÖ Incluida' : '‚ùå Sin tajada'}
                        </div>
                    `;
                } else {
                    summaryHTML += `
                        <div class="summary-item">
                            <strong>üçΩÔ∏è Incluye:</strong> ${sideText}
                        </div>
                    `;
                }
            } else {
                summaryHTML += `
                    <div class="summary-item">
                        <strong>üçØ Descripci√≥n:</strong> ${sideText}
                    </div>
                `;
            }
            
            document.getElementById('summaryContent').innerHTML = summaryHTML;
            document.getElementById('orderPrice').innerHTML = `üí∞ Precio: ${priceText}`;
        }

        function addAnotherOrder() {
            // Guardar el pedido actual
            allOrders.push({...currentOrder});
            
            // Resetear el pedido actual
            currentOrder = {
                dishType: '',
                protein: '',
                side: '',
                hallacaOption: '',
                hallacaQuantity: 1,
                quantity: 1,
                ensalada: true,
                tajada: true,
                forWho: ''
            };
            
            // Ocultar res√∫menes
            document.getElementById('orderSummary').classList.add('step-hidden');
            document.getElementById('allOrdersSummary').classList.add('step-hidden');
            
            // Mostrar selector de tipo de pedido
            showOrderTypeSelector();
        }

        function showOrderTypeSelector() {
            const step1 = document.getElementById('step1');
            
            step1.innerHTML = `
                <h3 class="step-title">¬øQu√© tipo de pedido quieres agregar?</h3>
                <p style="color: #ccc; margin-bottom: 20px; text-align: center;">
                    Elige el tipo de pedido que quieres hacer
                </p>
                
                <button class="option-btn" onclick="selectOrderType('comida')" 
                        style="background: linear-gradient(45deg, rgba(34,139,34,0.1), rgba(46,205,196,0.1)); border: 1px solid rgba(34,139,34,0.3);">
                    üçΩÔ∏è Comida de la Semana
                    <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                        Pastas, Pabell√≥n, Hallacas y m√°s
                    </div>
                </button>
                
                <button class="option-btn" onclick="selectOrderType('postre')"
                        style="background: linear-gradient(45deg, rgba(255,182,193,0.1), rgba(255,218,185,0.1)); border: 1px solid rgba(255,182,193,0.3);">
                    üç∞ Postres
                    <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                        Dulces caseros artesanales
                    </div>
                </button>
                
                <button class="option-btn" onclick="selectOrderType('salsa')"
                        style="background: linear-gradient(45deg, rgba(139,69,19,0.1), rgba(160,82,45,0.1)); border: 1px solid rgba(139,69,19,0.3);">
                    üçù Salsas Envasadas
                    <div style="font-size: 0.8rem; color: #ccc; margin-top: 5px;">
                        Salsas artesanales Envasadas (24 oz)
                    </div>
                </button>
                
                <button class="btn btn-secondary" onclick="cancelAddOrder()" style="width: 100%; margin-top: 20px;">
                    ‚¨ÖÔ∏è Volver al Resumen
                </button>
            `;
            
            // Ocultar otros pasos
            resetSteps();
            
            // Mostrar step1 y hacer scroll
            step1.scrollIntoView({ behavior: 'smooth' });
        }

        function selectOrderType(type) {
            if (type === 'comida') {
                isDessertMode = false;
                isSauceMode = false;
            } else if (type === 'postre') {
                isDessertMode = true;
                isSauceMode = false;
            } else if (type === 'salsa') {
                isDessertMode = false;
                isSauceMode = true;
            }
            
            // Marcar opci√≥n seleccionada
            document.querySelectorAll('#step1 .option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            // Resetear todos los pasos completamente
            setTimeout(() => {
                resetSteps();
                setupInitialMenuSteps(); // Usar la funci√≥n inicial en lugar de setupMenuSteps
                document.getElementById('step1').scrollIntoView({ behavior: 'smooth' });
            }, 300);
        }

        function cancelAddOrder() {
            // Remover el √∫ltimo pedido agregado y volver al estado anterior
            allOrders.pop();
            
            // Si hay pedidos, mostrar resumen de todos
            if (allOrders.length > 0) {
                showAllOrdersSummary();
            } else {
                // Si no hay pedidos, mostrar resumen del pedido actual
                // Restaurar el pedido actual (el √∫ltimo que se hab√≠a guardado)
                if (allOrders.length === 0) {
                    // Volver al resumen individual
                    showOrderSummary();
                }
            }
        }

        function proceedToCheckout() {
            allOrders.push({...currentOrder});
            showAllOrdersSummary();
        }

        function showAllOrdersSummary() {
            document.getElementById('orderSummary').classList.add('step-hidden');
            document.getElementById('allOrdersSummary').classList.remove('step-hidden');
            
            let allOrdersHTML = '';
            let total = 0;
            
            allOrders.forEach((order, index) => {
                let orderPrice = 5.00;
                let dishDescription = '';
                
                // CALCULAR PRECIO Y DESCRIPCI√ìN SEG√öN EL TIPO DE ORDEN
                if (order.dishType === 'bolognesa' || order.dishType === 'napoli' || order.dishType === 'costilla') {
                    const sauceNames = {
                        'bolognesa': 'Salsa Bolognesa',
                        'napoli': 'Salsa Napoli', 
                        'costilla': 'Salsa Napoli con Costilla de Cerdo'
                    };
                    if (order.dishType === 'napoli') {
                        orderPrice = 4.00 * order.quantity;
                    } else if (order.dishType === 'bolognesa') {
                        orderPrice = 5.00 * order.quantity;
                    } else if (order.dishType === 'costilla') {
                        orderPrice = 6.00 * order.quantity;
                    }
                    dishDescription = `
                        <p><strong>üçù</strong> ${order.quantity}x ${sauceNames[order.dishType]}</p>
                        <p><strong>üçΩÔ∏è</strong> Salsa artesanal congelada de 24 onzas, lista para calentar</p>
                        <p><strong>üí∞</strong> ${orderPrice.toFixed(2)}</p>
                    `;
                } else if (order.dishType === 'dulce-maracuya') {
                    orderPrice = 2.00 * order.quantity;
                    dishDescription = `
                        <p><strong>ü•≠</strong> ${order.quantity}x Dulce de Maracuy√° (Parchita)</p>
                        <p><strong>üçØ</strong> Postre casero artesanal</p>
                        <p><strong>üí∞</strong> ${orderPrice.toFixed(2)}</p>
                    `;
                } else if (order.dishType === 'dulce-limon') {
                    orderPrice = 2.00 * order.quantity;
                    dishDescription = `
                        <p><strong>üçã</strong> ${order.quantity}x Dulce de Lim√≥n</p>
                        <p><strong>üçØ</strong> Postre casero artesanal</p>
                        <p><strong>üí∞</strong> ${orderPrice.toFixed(2)}</p>
                    `;
                } else if (order.dishType === 'arroz-con-leche') {
                    orderPrice = 2.00 * order.quantity;
                    dishDescription = `
                        <p><strong>üçö</strong> ${order.quantity}x Arroz con Leche</p>
                        <p><strong>üçØ</strong> Postre casero artesanal</p>
                        <p><strong>üí∞</strong> ${orderPrice.toFixed(2)}</p>
                    `;
                } else if (order.dishType === 'pasta-corta') {
                    orderPrice = 4.00 * order.quantity;
                    dishDescription = `
                        <p><strong>üçù</strong> ${order.quantity}x Pasta corta a la Bolognesa</p>
                        <p><strong>üçΩÔ∏è</strong> Pasta corta con salsa bolognesa, pan de ajo y tajada</p>
                        <p><strong>üí∞</strong> ${orderPrice.toFixed(2)}</p>
                    `;
                } else if (order.dishType === 'pasta-costilla') {
                    orderPrice = 5.00 * order.quantity;
                    dishDescription = `
                        <p><strong>üçù</strong> ${order.quantity}x Pasta corta con Salsa de Costilla de Cerdo</p>
                        <p><strong>üçΩÔ∏è</strong> Pasta corta con salsa de costilla de cerdo, pan de ajo y tajada</p>
                        <p><strong>üí∞</strong> ${orderPrice.toFixed(2)}</p>
                    `;
                } else if (order.dishType === 'pollo-frito') {
                    orderPrice = 5.00 * order.quantity;
                    dishDescription = `
                        <p><strong>üçó</strong> ${order.quantity}x Pollo Frito con Pur√© y Tajadas</p>
                        <p><strong>üçΩÔ∏è</strong> Pollo frito dorado, pur√© de papa cremoso y tajadas de pl√°tano</p>
                        <p><strong>üí∞</strong> $${orderPrice.toFixed(2)}</p>
                    `;
                } else if (order.dishType === 'lasagna') {
                    orderPrice = 5.00 * order.quantity;
                    dishDescription = `
                        <p><strong>üçù</strong> ${order.quantity}x Lasagna (Pasticho)</p>
                        <p><strong>üçΩÔ∏è</strong> Capas de pasta con salsa bolognesa, queso y bechamel</p>
                        <p><strong>üí∞</strong> $${orderPrice.toFixed(2)}</p>
                    `;
                } else if (order.dishType === 'marquesa-chocolate') {
                    orderPrice = 2.00 * order.quantity;
                    dishDescription = `
                        <p><strong>üç´</strong> ${order.quantity}x Marquesa de Chocolate</p>
                        <p><strong>üçØ</strong> Postre casero artesanal</p>
                        <p><strong>üí∞</strong> $${orderPrice.toFixed(2)}</p>
                    `;
                } else if (order.dishType === 'pabellon') {
                    orderPrice = 5.00 * order.quantity;
                    dishDescription = `
                        <p><strong>üáªüá™</strong> ${order.quantity}x Pabell√≥n Criollo Venezolano</p>
                        <p><strong>üçΩÔ∏è</strong> Arroz, carne mechada, caraotas (frijoles negros) y tajadas</p>
                        <p><strong>üí∞</strong> ${orderPrice.toFixed(2)}</p>
                    `;
                } else if (order.dishType === 'hallaca') {
                    if (order.hallacaOption === 'individual') {
                        orderPrice = 3.00 * order.quantity;
                        dishDescription = `
                            <p><strong>ü´î</strong> ${order.quantity}x Hallaca${order.quantity > 1 ? 's' : ''} Venezolana${order.quantity > 1 ? 's' : ''}</p>
                            <p><strong>üçΩÔ∏è</strong> Masa de ma√≠z rellena con guiso, envuelta en hoja de pl√°tano</p>
                            <p><strong>üí∞</strong> ${orderPrice.toFixed(2)}</p>
                        `;
                    } else {
                        orderPrice = order.hallacaQuantity * 2.50;
                        dishDescription = `
                            <p><strong>ü´î</strong> ${order.hallacaQuantity} Hallacas Venezolanas (Por Mayor)</p>
                            <p><strong>üçΩÔ∏è</strong> Masa de ma√≠z rellena con guiso, envuelta en hoja de pl√°tano</p>
                            <p><strong>üí∞</strong> ${orderPrice.toFixed(2)}</p>
                        `;
                    }
                }
                
                total += orderPrice;
                
                // GENERAR HTML DEL PEDIDO
                allOrdersHTML += `
                    <div class="order-item">
                        <h4>Pedido ${index + 1} - ${order.forWho}</h4>
                        ${dishDescription}
                        <div style="display: flex; gap: 6px; margin-top: 10px;">
                            <button class="btn" style="background: linear-gradient(45deg, #ffa500, #ff8c00); padding: 3px 6px; font-size: 0.65rem; flex: 1; min-height: 26px; max-height: 26px; border-radius: 4px; line-height: 1;" onclick="editOrder(${index})">‚úèÔ∏è Editar</button>
                            <button class="btn" style="background: linear-gradient(45deg, #dc3545, #c82333); padding: 3px 6px; font-size: 0.65rem; flex: 1; min-height: 26px; max-height: 26px; border-radius: 4px; line-height: 1;" onclick="deleteOrder(${index})">üóëÔ∏è Eliminar</button>
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('allOrdersContent').innerHTML = allOrdersHTML;
            document.getElementById('totalPrice').textContent = total.toFixed(2);
            
            setTimeout(() => {
                document.getElementById('allOrdersSummary').scrollIntoView({ behavior: 'smooth' });
            }, 300);
        }

        function showCustomerForm() {
            document.getElementById('allOrdersSummary').classList.add('step-hidden');
            document.getElementById('customerForm').classList.remove('step-hidden');
            
            setTimeout(() => {
                document.getElementById('customerForm').scrollIntoView({ behavior: 'smooth' });
            }, 300);
        }

        function sendFinalOrder() {
            const name = document.getElementById('customerName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();
            const address = document.getElementById('customerAddress').value.trim();
            const specialNotes = document.getElementById('specialNotes').value.trim();
            
            if (!name || !phone || !address) {
                alert('Por favor, completa todos los datos requeridos');
                return;
            }
            
            customerData = { name, phone, address, specialNotes };
            
            let message = `üçΩÔ∏è *PEDIDO - LA COCINA DE ANITA*\n\n`;
            message += `üë§ *DATOS DEL CLIENTE:*\n`;
            message += `‚Ä¢ Nombre: ${customerData.name}\n`;
            message += `‚Ä¢ Tel√©fono: ${customerData.phone}\n`;
            message += `‚Ä¢ Direcci√≥n: ${customerData.address}\n\n`;
            
            message += `üìã *DETALLES DEL PEDIDO:*\n`;
            
            let total = 0;
            
            allOrders.forEach((order, index) => {
                let orderPrice = 5.00;
                
                message += `\n*Pedido ${index + 1} - ${order.forWho}:*\n`;
                
                if (order.dishType === 'bolognesa' || order.dishType === 'napoli' || order.dishType === 'costilla') {
                    const sauceNames = {
                        'bolognesa': 'Salsa Bolognesa',
                        'napoli': 'Salsa Napoli', 
                        'costilla': 'Salsa Napoli con Costilla de Cerdo'
                    };
                    if (order.dishType === 'napoli') {
                        orderPrice = 4.00 * order.quantity;
                    } else if (order.dishType === 'bolognesa') {
                        orderPrice = 5.00 * order.quantity;
                    } else if (order.dishType === 'costilla') {
                        orderPrice = 6.00 * order.quantity;
                    }
                    message += `üçù ${order.quantity}x ${sauceNames[order.dishType]}\n`;
                    message += `üçΩÔ∏è Salsa artesanal envasada de 24 onzas, lista para calentar\n`;
                    if (order.quantity > 1) {
                        message += `üí∞ ${order.quantity} x $${(orderPrice/order.quantity).toFixed(2)} = ${orderPrice.toFixed(2)}\n`;
                    } else {
                        message += `üí∞ ${orderPrice.toFixed(2)}\n`;
                    }
                } else if (order.dishType === 'dulce-maracuya') {
                    orderPrice = 2.00 * order.quantity;
                    message += `ü•≠ ${order.quantity}x Dulce de Maracuy√° (Parchita)\n`;
                    message += `üçØ Postre casero artesanal\n`;
                    message += `üí∞ ${order.quantity} x $2.00 = ${orderPrice.toFixed(2)}\n`;
                } else if (order.dishType === 'dulce-limon') {
                    orderPrice = 2.00 * order.quantity;
                    message += `üçã ${order.quantity}x Dulce de Lim√≥n\n`;
                    message += `üçØ Postre casero artesanal\n`;
                    message += `üí∞ ${order.quantity} x $2.00 = ${orderPrice.toFixed(2)}\n`;
                } else if (order.dishType === 'pasta-corta') {
                    orderPrice = 4.00 * order.quantity;
                    message += `üçù ${order.quantity}x Pasta corta a la Bolognesa\n`;
                    message += `üçΩÔ∏è Pasta corta con salsa bolognesa, pan de ajo y tajada\n`;
                    if (order.quantity > 1) {
                        message += `üí∞ ${order.quantity} x $4.00 = ${orderPrice.toFixed(2)}\n`;
                    } else {
                        message += `üí∞ ${orderPrice.toFixed(2)}\n`;
                    }
                } else if (order.dishType === 'arroz-con-leche') {
                    orderPrice = 2.00 * order.quantity;
                    message += `üçö ${order.quantity}x Arroz con Leche\n`;
                    message += `üçØ Postre casero artesanal\n`;
                    if (order.quantity > 1) {
                        message += `üí∞ ${order.quantity} x $2.00 = ${orderPrice.toFixed(2)}\n`;
                    } else {
                        message += `üí∞ ${orderPrice.toFixed(2)}\n`;
                    }
                } else if (order.dishType === 'marquesa-chocolate') {
                    orderPrice = 2.00 * order.quantity;
                    message += `üç´ ${order.quantity}x Marquesa de Chocolate\n`;
                    message += `üçØ Postre casero artesanal\n`;
                    if (order.quantity > 1) {
                        message += `üí∞ ${order.quantity} x $2.00 = ${orderPrice.toFixed(2)}\n`;
                    } else {
                        message += `üí∞ ${orderPrice.toFixed(2)}\n`;
                    }
                } else if (order.dishType === 'pasta-costilla') {
                    orderPrice = 5.00 * order.quantity;
                    message += `üçù ${order.quantity}x Pasta corta con Salsa de Costilla de Cerdo\n`;
                    message += `üçΩÔ∏è Pasta corta con salsa de costilla de cerdo, pan de ajo y tajada\n`;
                    if (order.quantity > 1) {
                        message += `üí∞ ${order.quantity} x $5.00 = ${orderPrice.toFixed(2)}\n`;
                    } else {
                        message += `üí∞ ${orderPrice.toFixed(2)}\n`;
                    }
                } else if (order.dishType === 'pollo-frito') {
                    orderPrice = 5.00 * order.quantity;
                    message += `üçó ${order.quantity}x Pollo Frito con Pur√© y Tajadas\n`;
                    message += `üçΩÔ∏è Pollo frito dorado, pur√© de papa cremoso y tajadas de pl√°tano\n`;
                    if (order.quantity > 1) {
                        message += `üí∞ ${order.quantity} x $5.00 = $${orderPrice.toFixed(2)}\n`;
                    } else {
                        message += `üí∞ $${orderPrice.toFixed(2)}\n`;
                    }
                } else if (order.dishType === 'lasagna') {
                    orderPrice = 5.00 * order.quantity;
                    message += `üçù ${order.quantity}x Lasagna (Pasticho)\n`;
                    message += `üçΩÔ∏è Capas de pasta con salsa bolognesa, queso y bechamel\n`;
                    if (order.quantity > 1) {
                        message += `üí∞ ${order.quantity} x $5.00 = $${orderPrice.toFixed(2)}\n`;
                    } else {
                        message += `üí∞ $${orderPrice.toFixed(2)}\n`;
                    }
                } else if (order.dishType === 'pabellon') {
                    orderPrice = 5.00 * order.quantity;
                    message += `üáªüá™ ${order.quantity}x Pabell√≥n Criollo Venezolano\n`;
                    message += `üçΩÔ∏è Arroz blanco, carne mechada, caraotas (frijoles negros) y tajadas\n`;
                    if (order.quantity > 1) {
                        message += `üí∞ ${order.quantity} x $5.00 = ${orderPrice.toFixed(2)}\n`;
                    } else {
                        message += `üí∞ ${orderPrice.toFixed(2)}\n`;
                    }
                } else if (order.dishType === 'hallaca') {
                    if (order.hallacaOption === 'individual') {
                        orderPrice = 3.00 * order.quantity;
                        message += `ü´î ${order.quantity}x Hallaca${order.quantity > 1 ? 's' : ''} Venezolana${order.quantity > 1 ? 's' : ''} Individual${order.quantity > 1 ? 'es' : ''}\n`;
                        message += `üçΩÔ∏è Masa de ma√≠z rellena con guiso de carne, pollo, cerdo y aceitunas, envuelta en hoja de pl√°tano\n`;
                        if (order.quantity > 1) {
                            message += `üí∞ ${order.quantity} x $3.00 = ${orderPrice.toFixed(2)}\n`;
                        } else {
                            message += `üí∞ ${orderPrice.toFixed(2)}\n`;
                        }
                    } else {
                        orderPrice = order.hallacaQuantity * 2.50;
                        message += `ü´î ${order.hallacaQuantity} Hallacas Venezolanas (Por Mayor)\n`;
                        message += `üçΩÔ∏è Masa de ma√≠z rellena con guiso de carne, pollo, cerdo y aceitunas, envuelta en hoja de pl√°tano\n`;
                        message += `üì¶ Cantidad: ${order.hallacaQuantity} unidades x $2.50\n`;
                        message += `üí∞ ${orderPrice.toFixed(2)}\n`;
                    }
                } else {
                    orderPrice = 5.00 * order.quantity;
                    const proteinText = order.protein === 'pollo' ? 'Milanesa de Pollo' : 'Milanesa de Carne';
                    const sideText = order.side === 'pure' ? 'Pur√© de Papa' : 'Arroz';
                    const ensaladaText = order.ensalada ? 'con ensalada' : 'sin ensalada';
                    const tajadaText = order.tajada ? 'con tajada' : 'sin tajada';
                    
                    message += `üçñ ${order.quantity}x ${proteinText}\n`;
                    message += `üçΩÔ∏è ${sideText}\n`;
                    message += `ü•ó ${ensaladaText}\n`;
                    message += `üçå ${tajadaText}\n`;
                    if (order.quantity > 1) {
                        message += `üí∞ ${order.quantity} x $5.00 = ${orderPrice.toFixed(2)}\n`;
                    } else {
                        message += `üí∞ ${orderPrice.toFixed(2)}\n`;
                    }
                }
                
                total += orderPrice;
            });
            
            message += `\nüí∞ *TOTAL: ${total.toFixed(2)}*\n\n`;

            if (customerData.specialNotes) {
                message += `üìù *NOTAS ESPECIALES:*\n${customerData.specialNotes}\n\n`;
            }

            message += `¬°Hola! Este es mi pedido completo. ¬øPodr√≠as confirmar la disponibilidad y tiempo de entrega?\n\n`;
            
            // Verificar longitud del mensaje
            if (message.length > 1000) {
                if (!confirm('El pedido es extenso. ¬øQuieres continuar envi√°ndolo por WhatsApp?')) {
                    return;
                }
            }

            // Dividir mensaje si es muy largo
            const encodedMessage = encodeURIComponent(message);
            if (encodedMessage.length > 2000) {
                navigator.clipboard.writeText(message).then(() => {
                    alert('El mensaje se copi√≥ al portapapeles. Se abrir√° WhatsApp para que lo pegues.');
                    window.open('https://wa.me/50768257958', '_blank');
                }).catch(() => {
                    prompt('Copia este mensaje manualmente:', message);
                    window.open('https://wa.me/50768257958', '_blank');
                });
            } else {
                window.open(`https://wa.me/50768257958?text=${encodedMessage}`, '_blank');
            }
        }

        function resetSteps() {
            document.getElementById('step2').classList.add('step-hidden');
            document.getElementById('step2b').classList.add('step-hidden');
            document.getElementById('step2c').classList.add('step-hidden');
            document.getElementById('step3').classList.add('step-hidden');
            document.getElementById('step4').classList.add('step-hidden');
            document.getElementById('customerForm').classList.add('step-hidden');
            document.getElementById('orderSummary').classList.add('step-hidden');
            document.getElementById('allOrdersSummary').classList.add('step-hidden');
            
            // Limpiar el contenedor temporal si existe
            const tempStep = document.getElementById('tempForWhoStep');
            if (tempStep) {
                tempStep.classList.add('step-hidden');
                tempStep.innerHTML = '';
            }
            
            // Resetear step2 completamente
            const step2 = document.getElementById('step2');
            step2.innerHTML = `
                <h3 class="step-title">Paso 2: Elige tu Acompa√±amiento</h3>
                <button class="option-btn" onclick="selectSide('pure')">ü•î Pur√© de Papa</button>
                <button class="option-btn" onclick="selectSide('arroz')">üçö Arroz</button>
            `;
            
            // Resetear step3 completamente
            const step3 = document.getElementById('step3');
            step3.innerHTML = `
                <h3 class="step-title">Paso 3: Personaliza tu Plato (Opcional)</h3>
                <div class="extras-note">
                    <p>üí° Por defecto incluimos ensalada rallada y tajada</p>
                    <p>Puedes quitarlas si no las quieres tocando los botones</p>
                </div>
                <div class="extras-container">
                    <div class="extra-option">
                        <button class="toggle-btn active" id="ensaladaBtn" onclick="toggleExtra('ensalada')">
                            ü•ó Ensalada Rallada
                        </button>
                    </div>
                    <div class="extra-option">
                        <button class="toggle-btn active" id="tajadaBtn" onclick="toggleExtra('tajada')">
                            üçå Tajada
                        </button>
                    </div>
                </div>
            `;
            
            // Resetear step4 completamente
            const step4 = document.getElementById('step4');
            step4.innerHTML = `
                <h3 class="step-title">Paso 4: ¬øPara qui√©n es este pedido?</h3>
                <input type="text" id="forWhoInput" class="text-input" placeholder="Ej: Para Mar√≠a, Para Juan, Para m√≠..." maxlength="50">
                <button class="btn" style="width: 100%; margin-top: 15px;" onclick="setOrderRecipient()">‚úÖ Confirmar</button>
            `;
            
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Resetear el pedido actual
            currentOrder.ensalada = true;
            currentOrder.tajada = true;
            currentOrder.quantity = 1;
            
            // Resetear inputs
            const forWhoInput = document.getElementById('forWhoInput');
            if (forWhoInput) forWhoInput.value = '';
            
            const hallacaInput = document.getElementById('hallacaQuantityInput');
            if (hallacaInput) hallacaInput.value = '10';
        }

        function goBack() {
            // Resetear variables globales
            currentOrder = {
                dishType: '',
                protein: '',
                side: '',
                hallacaOption: '',
                hallacaQuantity: 1,
                quantity: 1,
                ensalada: true,
                tajada: true,
                forWho: ''
            };
            allOrders = [];
            customerData = { name: '', phone: '', address: '' };
            isDessertMode = false;
            isSauceMode = false;
            
            // Limpiar todos los campos de input
            const customerNameInput = document.getElementById('customerName');
            const customerPhoneInput = document.getElementById('customerPhone');
            const customerAddressInput = document.getElementById('customerAddress');
            const specialNotesInput = document.getElementById('specialNotes');
            const forWhoInput = document.getElementById('forWhoInput');
            const hallacaInput = document.getElementById('hallacaQuantityInput');
            
            if (customerNameInput) customerNameInput.value = '';
            if (customerPhoneInput) customerPhoneInput.value = '';
            if (customerAddressInput) customerAddressInput.value = '';
            if (specialNotesInput) specialNotesInput.value = '';
            if (forWhoInput) forWhoInput.value = '';
            if (hallacaInput) hallacaInput.value = '10';
            
            // Ocultar todas las pantallas del men√∫
            document.getElementById('step2').classList.add('step-hidden');
            document.getElementById('step2b').classList.add('step-hidden');
            document.getElementById('step2c').classList.add('step-hidden');
            document.getElementById('step3').classList.add('step-hidden');
            document.getElementById('step4').classList.add('step-hidden');
            document.getElementById('orderSummary').classList.add('step-hidden');
            document.getElementById('allOrdersSummary').classList.add('step-hidden');
            document.getElementById('customerForm').classList.add('step-hidden');
            
            // Limpiar selecciones
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Resetear botones de extras
            const ensaladaBtn = document.getElementById('ensaladaBtn');
            const tajadaBtn = document.getElementById('tajadaBtn');
            if (ensaladaBtn) ensaladaBtn.classList.add('active');
            if (tajadaBtn) tajadaBtn.classList.add('active');
            
            // Remover elementos temporales
            const continueBtn = document.querySelector('.continue-btn');
            if (continueBtn) {
                continueBtn.remove();
            }
            
            const tempStep = document.getElementById('tempForWhoStep');
            if (tempStep) {
                tempStep.remove();
            }
            
            // Ocultar pantalla del men√∫ y mostrar pantalla de bienvenida
            document.getElementById('menuScreen').style.display = 'none';
            document.getElementById('welcomeScreen').classList.remove('hidden');
            
            // Hacer scroll hacia arriba
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function editOrder(index) {
            if (confirm('¬øQuieres editar este pedido?')) {
                // Remover el pedido de la lista
                const orderToEdit = allOrders.splice(index, 1)[0];
                
                // Cargar los datos del pedido a editar
                currentOrder = {...orderToEdit};
                
                // Determinar el tipo de pedido para configurar el modo correcto
                if (orderToEdit.dishType === 'dulce-maracuya' || orderToEdit.dishType === 'dulce-limon' || orderToEdit.dishType === 'arroz-con-leche' || orderToEdit.dishType === 'marquesa-chocolate') {
                    isDessertMode = true;
                    isSauceMode = false;
                } else if (orderToEdit.dishType === 'bolognesa' || orderToEdit.dishType === 'napoli' || orderToEdit.dishType === 'costilla') {
                    isDessertMode = false;
                    isSauceMode = true;
                } else {
                    isDessertMode = false;
                    isSauceMode = false;
                }
                
                // Resetear y mostrar el formulario de pedido
                resetSteps();
                setupInitialMenuSteps();
                
                // Ocultar resumen de todos los pedidos
                document.getElementById('allOrdersSummary').classList.add('step-hidden');
                
                // Mostrar mensaje de edici√≥n
                alert('Ahora puedes modificar este pedido. Los cambios se guardar√°n cuando confirmes.');
                
                document.getElementById('step1').scrollIntoView({ behavior: 'smooth' });
            }
        }

        function deleteOrder(index) {
            const order = allOrders[index];
            let orderName = '';
            
            // Determinar el nombre del pedido para el mensaje de confirmaci√≥n
            if (order.dishType === 'dulce-maracuya') {
                orderName = `${order.quantity}x Dulce de Maracuy√° para ${order.forWho}`;
            } else if (order.dishType === 'dulce-limon') {
                orderName = `${order.quantity}x Dulce de Lim√≥n para ${order.forWho}`;
            } else if (order.dishType === 'pasta-corta') {
                orderName = `${order.quantity}x Pasta corta para ${order.forWho}`;
            } else if (order.dishType === 'pabellon') {
                orderName = `${order.quantity}x Pabell√≥n Criollo para ${order.forWho}`;
            } else if (order.dishType === 'hallaca') {
                if (order.hallacaOption === 'individual') {
                    orderName = `${order.quantity}x Hallaca${order.quantity > 1 ? 's' : ''} para ${order.forWho}`;
                } else {
                    orderName = `${order.hallacaQuantity} Hallacas (Por Mayor) para ${order.forWho}`;
                }
            } else if (order.dishType === 'arroz-con-leche') {
                orderName = `${order.quantity}x Arroz con Leche para ${order.forWho}`;
            } else if (order.dishType === 'pasta-costilla') {
                orderName = `${order.quantity}x Pasta con Costilla para ${order.forWho}`;
            } else if (order.dishType === 'pollo-frito') {
                orderName = `${order.quantity}x Pollo Frito para ${order.forWho}`;
            } else if (order.dishType === 'lasagna') {
                orderName = `${order.quantity}x Lasagna (Pasticho) para ${order.forWho}`;
            } else if (order.dishType === 'marquesa-chocolate') {
                orderName = `${order.quantity}x Marquesa de Chocolate para ${order.forWho}`;
            } else if (order.dishType === 'bolognesa' || order.dishType === 'napoli' || order.dishType === 'costilla') {
                const sauceNames = {
                    'bolognesa': 'Salsa Bolognesa',
                    'napoli': 'Salsa Napoli', 
                    'costilla': 'Salsa de Costilla'
                };
                orderName = `${order.quantity}x ${sauceNames[order.dishType]} para ${order.forWho}`;
            } else {
                const proteinText = order.protein === 'pollo' ? 'Milanesa de Pollo' : 'Milanesa de Carne';
                orderName = `${order.quantity}x ${proteinText} para ${order.forWho}`;
            }
            
            if (confirm(`¬øEst√°s seguro de que quieres eliminar este pedido?\n\n${orderName}`)) {
                // Eliminar el pedido del array
                allOrders.splice(index, 1);
                
                // Si no quedan pedidos, volver al inicio
                if (allOrders.length === 0) {
                    alert('Se eliminaron todos los pedidos. Regresando al inicio...');
                    goBack();
                    return;
                }
                
                // Si quedan pedidos, actualizar el resumen
                showAllOrdersSummary();
                
                // Mostrar mensaje de confirmaci√≥n
                setTimeout(() => {
                    alert('Pedido eliminado correctamente');
                }, 100);
            }
        }
    </script>
    <script>
    // Speed Insights de Vercel
    window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
    <script>
    // Inicializaci√≥n
    document.addEventListener('DOMContentLoaded', function() {
        va('init', {
        endpoint: 'https://lacocinadeanita.vercel.app/'
        });
    });
    </script>
</body>
</html>